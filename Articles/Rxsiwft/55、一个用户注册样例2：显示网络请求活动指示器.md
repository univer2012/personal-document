当我们发起网络请求，或者进行其他一些比较耗时的操作时，最好给用户一个指示。比如上文的用户注册样例，当点击注册按钮后会等待 **1.5** 秒才返回结果，那么为了更好的用户体验这时就可以显示个活动指示器。

​    下面我通过样例演示几种不同的活动指示器用法，以及他们如何根据请求操作自动进行隐藏和显示。

## 一、准备工作

### 1，引入 ActivityIndicator

（1）`ActivityIndicator` 类可不是苹果自带的 `UIActivityIndicator`，它是一个用来监测是否有序列正在发送元素的类：

- 如果至少还有一个序列正在工作，那么它会返回一个 `true`。
- 如果没有序列在工作了，那么它会返回一个 `false` 值。

（2）默认情况下项目引入的 `RxSwift` 和 `RxCocoa` 库中是不会有这个类的，我们需要手动将 `RxSwift` 源码包中的 `RxExample/Services/ActivityIndicator.swift` 这个文件添加到我们项目中来。

![img](https:////upload-images.jianshu.io/upload_images/3788243-50e5a432cdd2d723.png?imageMogr2/auto-orient/strip|imageView2/2/w/313)

### 2，修改 ViewModel

（1）接着对前文的 `GitHubSignupViewModel` 做个修改，增加了个 `signingIn` 序列，用于表示当前是否正在“发请求注册中”。

（2）我们在请求序列中使用 `trackActivity` 方法可以把这个请求序列放入制定的 `activityIndicator` 中进行监测，监测结果则做为 `signingIn` 序列。